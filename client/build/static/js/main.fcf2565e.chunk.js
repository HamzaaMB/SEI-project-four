(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{52:function(e,a,t){},93:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t(16),n=t.n(s),r=(t(52),t(14)),o=t(7),i=t(15),l=t(1),j=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"hero-container",children:[Object(l.jsxs)("div",{className:"hero-title",children:["You are",Object(l.jsx)("br",{})," what you",Object(l.jsx)("br",{})," eat."]}),Object(l.jsx)("div",{children:Object(l.jsx)(i.a,{className:"hero-button",variant:"primary",href:"/foods",children:"Start Here"})}),Object(l.jsxs)("div",{className:"hero-login",children:["Already have an account? ",Object(l.jsx)("a",{href:"/login",children:"Login"})]})]})})},d=t(5),b=t.n(d),h=t(8),u=t(10),m=t(9),O=t.n(m),x=function(){var e=Object(c.useState)(null),a=Object(u.a)(e,2),t=a[0],s=a[1];return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){var a,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("api/foods/");case 2:a=e.sent,t=a.data,s(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),t?Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{children:t.map((function(e){return Object(l.jsx)(r.b,{to:"/foods/".concat(e.id),children:Object(l.jsx)("div",{className:"results-container",children:Object(l.jsx)("ul",{className:"food-list",children:Object(l.jsxs)("div",{className:"food-results",children:[Object(l.jsx)("li",{children:Object(l.jsx)("h4",{className:"title-search",children:e.title})}),Object(l.jsx)("li",{children:Object(l.jsxs)("h6",{className:"serving-search",children:[e.serving," ",e.servingAs,", ",e.weight,"g"]})}),Object(l.jsx)("li",{children:Object(l.jsxs)("h6",{className:"macros-search",children:["Carbs: ",e.carbs," | Protein: ",e.protein," | Fat: ",e.fat]})})]})})})},e.id)}))})}):null},p=t(23),f=t(24),v=function(){var e=Object(c.useState)({email:"",password:""}),a=Object(u.a)(e,2),t=a[0],s=a[1],n=Object(o.f)(),r=function(e){var a=Object(f.a)(Object(f.a)({},t),{},Object(p.a)({},e.target.name,e.target.value));s(a)},j=function(){var e=Object(h.a)(b.a.mark((function e(a){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,O.a.post("api/auth/login/",t);case 3:c=e.sent,window.localStorage.setItem("token",c.data.token),n.push("/logbook");case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(l.jsx)("section",{className:"login-wrapper",children:Object(l.jsx)("div",{className:"login-box",children:Object(l.jsxs)("form",{className:"login-form",onSubmit:j,children:[Object(l.jsxs)("div",{className:"email-container",children:[Object(l.jsx)("label",{className:"label",children:"Email"}),Object(l.jsx)("input",{className:"input",placeholder:"Email",name:"email",value:t.email,onChange:function(e){return r(e)}})]}),Object(l.jsxs)("div",{className:"password-container",children:[Object(l.jsx)("label",{className:"label",children:"Password"}),Object(l.jsx)("input",{className:"input",type:"password",placeholder:"Password",name:"password",value:t.password,onChange:function(e){return r(e)}})]}),Object(l.jsx)("div",{className:"login-button",children:Object(l.jsx)(i.a,{type:"submit",className:"hero-button",variant:"primary",children:"Login"})})]})})})},g=function(){var e=Object(c.useState)({first_name:"",username:"",email:"",password:"",password_confirmation:""}),a=Object(u.a)(e,2),t=a[0],s=a[1],n=function(e){console.log(e.target.value);var a=Object(f.a)(Object(f.a)({},t),{},Object(p.a)({},e.target.name,e.target.value));s(a)},r=function(){var e=Object(h.a)(b.a.mark((function e(a){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,O.a.post("api/auth/register/",t);case 4:c=e.sent,console.log(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}();return Object(l.jsx)("section",{className:"register-wrapper",children:Object(l.jsx)("div",{className:"register-box",children:Object(l.jsxs)("form",{onSubmit:r,children:[Object(l.jsxs)("div",{className:"email-container",children:[Object(l.jsx)("label",{className:"label",children:"first name"}),Object(l.jsx)("input",{className:"input",type:"FirstName",placeholder:"FirstName",name:"first_name",value:t.first_name,onChange:function(e){return n(e)}})]}),Object(l.jsxs)("div",{className:"email-container",children:[Object(l.jsx)("label",{className:"label",children:"Username"}),Object(l.jsx)("input",{className:"input",type:"Username",placeholder:"Username",name:"username",value:t.username,onChange:function(e){return n(e)}})]}),Object(l.jsxs)("div",{className:"email-container",children:[Object(l.jsx)("label",{className:"label",children:"Email"}),Object(l.jsx)("input",{className:"input",placeholder:"Email",name:"email",value:t.email,onChange:function(e){return n(e)}})]}),Object(l.jsxs)("div",{className:"password-container",children:[Object(l.jsx)("label",{className:"label",children:"Password"}),Object(l.jsx)("input",{className:"input",type:"password",placeholder:"Password",name:"password",value:t.password,onChange:function(e){return n(e)}})]}),Object(l.jsxs)("div",{className:"password-container",children:[Object(l.jsx)("label",{className:"label",children:"Password Confirmation"}),Object(l.jsx)("input",{className:"input",type:"password Confirmation",placeholder:"Password Confirmation",name:"password_confirmation",value:t.password_confirmation,onChange:function(e){return n(e)}})]}),Object(l.jsx)("div",{className:"login-button register-button",children:Object(l.jsx)(i.a,{type:"submit",className:"hero-button",variant:"primary",children:"Sign Me Up"})})]})})})},N=function(){var e=Object(c.useState)(null),a=Object(u.a)(e,2),t=a[0],s=a[1];return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){var a,t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.getItem("token"),e.next=3,O.a.get("/api/logbook/",{headers:{Authorization:"Bearer ".concat(a)}});case 3:t=e.sent,c=t.data,s(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),t?Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"logbook-container",children:Object(l.jsxs)("div",{className:"logbook-box",children:[Object(l.jsxs)("div",{className:"logbook-top",children:[Object(l.jsx)("div",{className:"logbook-status",children:Object(l.jsxs)("h4",{children:["You have ",t.length," logbooks"]})}),Object(l.jsx)("div",{className:"logbook-welcome",children:Object(l.jsxs)("h4",{children:["Welcome back ",t[0].owner.first_name]})})]}),Object(l.jsx)("div",{className:"logbook-main",children:t.map((function(e){return Object(l.jsx)(r.b,{to:"/logbook/".concat(e.id),children:Object(l.jsx)("div",{className:"book",children:Object(l.jsx)("div",{className:"name-book",children:Object(l.jsx)("h4",{className:"logbook-name",children:e.name})})},e.id)},e.id)}))})]})})}):null},w=function(){var e=Object(o.g)(),a=Object(c.useState)(null),t=Object(u.a)(a,2),s=t[0],n=t[1];return Object(c.useEffect)((function(){(function(){var a=Object(h.a)(b.a.mark((function a(){var t,c,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=window.localStorage.getItem("token"),a.next=3,O.a.get("/api/logbook/".concat(e.id),{headers:{Authorization:"Bearer ".concat(t)}});case 3:c=a.sent,s=c.data,n(s);case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[]),s?Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"bookshow-container",children:Object(l.jsxs)("div",{className:"bookshow-list",children:[Object(l.jsx)("h3",{className:"bookshow-name",children:s.name}),Object(l.jsx)("div",{className:"bookshow",children:s.food.map((function(e){return Object(l.jsxs)("div",{className:"show-tile",children:[Object(l.jsx)("h4",{className:"show-food",children:e.title}),Object(l.jsx)("h6",{className:"show-calories",children:e.calories})]},e.id)}))}),Object(l.jsxs)("div",{className:"total-tile",children:[Object(l.jsx)("h4",{className:"total-title",children:"Total Calories"}),Object(l.jsx)("div",{className:"show-total",children:s.food.reduce((function(e,a){return e+a.calories}),0)})]}),Object(l.jsx)("div",{className:"back-delete-buttons",children:Object(l.jsx)("div",{children:Object(l.jsx)(i.a,{className:"hero-button",variant:"primary",href:"/logbook",children:"Back to Logbooks"})})})]})})}):null},k=t(26),y=t(21),F=function(){var e=window.localStorage.getItem("token");if(!e)return!1;var a=e.split(".");return!(a.length<3)&&JSON.parse(atob(a[1]))},S=function(){var e=F();return!!e&&Math.round(Date.now()/1e3)<e.exp},C=function(){var e=Object(o.f)();return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(k.a,{style:{paddingLeft:"185px"},bg:"primary",variamt:"dark",children:[Object(l.jsx)(k.a.Brand,{href:"/",children:Object(l.jsx)("h1",{className:"brand-logo",children:"TrackMyCal"})}),Object(l.jsx)(k.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(l.jsx)(k.a.Collapse,{id:"basic-navbar-nav",children:Object(l.jsxs)(y.a,{children:[Object(l.jsx)(y.a.Link,{style:{color:"white"},href:"/foods",children:"Food"}),S()&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(y.a.Link,{style:{color:"white"},href:"/logbook",children:"Logbook"}),Object(l.jsx)(y.a.Link,{style:{color:"white"},onClick:function(){window.localStorage.removeItem("token"),e.push("/"),window.location.reload()},children:"Logout"})]}),!S()&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(y.a.Link,{style:{color:"white"},href:"/login",children:"Login"}),Object(l.jsx)(y.a.Link,{style:{color:"white"},href:"/register",children:"Register"})]})]})})]})})},L=t(27),I=t(47),E=function(){var e=Object(o.g)(),a=Object(o.f)(),t=Object(c.useState)(null),s=Object(u.a)(t,2),n=s[0],r=s[1],j=Object(c.useState)({food:""}),d=Object(u.a)(j,2),m=d[0],x=d[1],p=Object(c.useState)(null),f=Object(u.a)(p,2),v=f[0],g=f[1];Object(c.useEffect)((function(){(function(){var a=Object(h.a)(b.a.mark((function a(){var t,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.get("/api/foods/".concat(e.id,"/"));case 2:t=a.sent,c=t.data,r(c);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[]);var N=function(){var e=Object(h.a)(b.a.mark((function e(t){var c,s,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=window.localStorage.getItem("token"),console.log("food ID>>",n.id),s={id:n.id},e.next=6,O.a.post("/api/logbook/".concat(v.id,"/"),s,{headers:{Authorization:"Bearer ".concat(c)}});case 6:r=e.sent,a.push("/logbook"),console.log("submit response",r);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){var a,t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.getItem("token"),e.next=3,O.a.get("/api/logbook",{headers:{Authorization:"Bearer ".concat(a)}});case 3:t=e.sent,c=t.data,x(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var w=function(){var e=Object(h.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(a);case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();if(!n)return null;console.log(n);var k=Math.floor(parseFloat("".concat(n.fat))/parseFloat("".concat(n.weight))*100),y=Math.floor(parseFloat("".concat(n.protein))/parseFloat("".concat(n.weight))*100),F=Math.floor(parseFloat("".concat(n.carbs))/parseFloat("".concat(n.weight))*100);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("section",{className:"main-container",children:Object(l.jsxs)("div",{className:"item-container",children:[Object(l.jsx)("div",{className:"item-crumb",children:Object(l.jsxs)(L.a,{style:{color:"white"},children:[Object(l.jsx)(L.a.Item,{href:"/",children:"Home"}),Object(l.jsx)(L.a.Item,{href:"/foods",children:"Food Search"}),Object(l.jsx)(L.a.Item,{active:!0,children:"Food"})]})}),Object(l.jsx)("div",{className:"food-title",children:Object(l.jsx)("h2",{className:"item-title",children:n.title})}),Object(l.jsx)("div",{className:"item-serving",children:Object(l.jsxs)("h3",{className:"serving-size",children:["Serving size: ",n.serving," ",n.servingAs]})}),Object(l.jsxs)("div",{className:"macro-container",children:[Object(l.jsxs)("div",{className:"macro-calorie",children:[Object(l.jsx)("h4",{className:"food-calories",children:n.calories}),Object(l.jsx)("span",{className:"calories-span",children:"Calories"})]}),Object(l.jsxs)("div",{className:"macro-carbs",children:[Object(l.jsx)("span",{className:"carbs-percentage",children:F+"%"}),Object(l.jsxs)("h4",{className:"carbs macro",children:[n.carbs,Object(l.jsx)("span",{className:"gram-span",children:"g"})]}),Object(l.jsx)("span",{className:"macro-content",children:"Carbs"})]}),Object(l.jsxs)("div",{className:"macro-fat",children:[Object(l.jsx)("span",{className:"fat-percentage",children:k+"%"}),Object(l.jsxs)("h4",{className:"fat macro",children:[n.fat,Object(l.jsx)("span",{className:"gram-span",children:"g"})]}),Object(l.jsx)("span",{className:"macro-content",children:"Fat"})]}),Object(l.jsxs)("div",{className:"macro-protein",children:[Object(l.jsx)("span",{className:"protein-percentage",children:y+"%"}),Object(l.jsxs)("h4",{className:"protein macro",children:[n.protein,Object(l.jsx)("span",{className:"gram-span",children:"g"})]}),Object(l.jsx)("span",{className:"macro-content",children:"Protein"})]})]}),Object(l.jsxs)("div",{className:"item-add",children:[S&&Object(l.jsxs)("form",{onSubmit:N,children:[Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label-existing",children:"Add to existing logbook"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)(I.a,{options:m,onChange:function(e){return w(e)},getOptionValue:function(e){return e.name},getOptionLabel:function(e){return e.name}})})]}),Object(l.jsx)("div",{className:"field",children:Object(l.jsx)(i.a,{type:"submit",className:"hero-button",variant:"primary",children:"Add Food"})})]}),!S&&Object(l.jsx)("h4",{children:"Login to add to logbook"})]})]})})})},A=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(r.a,{children:Object(l.jsxs)(o.c,{children:[Object(l.jsxs)(o.a,{exact:!0,path:"/",children:[Object(l.jsx)(C,{class:"nav-home"}),Object(l.jsx)(j,{})]}),Object(l.jsxs)(o.a,{path:"/foods/:id",children:[Object(l.jsx)(C,{class:"nav-home"}),Object(l.jsx)(E,{})]}),Object(l.jsxs)(o.a,{exact:!0,path:"/foods",children:[Object(l.jsx)(C,{class:"nav-home"}),Object(l.jsx)(x,{})]}),Object(l.jsxs)(o.a,{path:"/login",children:[Object(l.jsx)(C,{class:"nav-home"}),Object(l.jsx)(v,{})]}),Object(l.jsxs)(o.a,{path:"/register",children:[Object(l.jsx)(C,{class:"nav-home"}),Object(l.jsx)(g,{})]}),Object(l.jsxs)(o.a,{path:"/logbook/:id",children:[Object(l.jsx)(C,{class:"nav-home"}),Object(l.jsx)(w,{})]}),Object(l.jsxs)(o.a,{path:"/logbook",children:[Object(l.jsx)(C,{class:"nav-home"}),Object(l.jsx)(N,{})]})]})})})};n.a.render(Object(l.jsx)(A,{}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.fcf2565e.chunk.js.map